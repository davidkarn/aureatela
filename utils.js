var bible = {
    "genesis":			 [31, 25, 24, 26, 32, 22, 24, 22, 29,
				  32, 32, 20, 18, 24, 21, 16, 27, 33, 38, 18,
				  34, 24, 20, 67, 34, 35, 46, 22, 35, 43, 54,
				  33, 20, 31, 29, 43, 36, 30, 23, 23, 57, 38,
				  34, 34, 28, 34, 31, 22, 33, 26],
    "exodus":			 [22, 25, 22, 31, 23, 30, 29, 28, 35,
				  29, 10, 51, 22, 31, 27, 36, 16, 27, 25, 26,
				  37, 30, 33, 18, 40, 37, 21, 43, 46, 38, 18,
				  35, 23, 35, 35, 38, 29, 31, 43, 38],
    "leviticus":		 [17, 16, 17, 35, 26, 23, 38, 36, 24,
				  20, 47, 8, 59, 57, 33, 34, 16, 30, 37, 27,
				  24, 33, 44, 23, 55, 46, 34],
    "numbers":			 [54, 34, 51, 49, 31, 27, 89, 26, 23,
				  36, 35, 16, 33, 45, 41, 35, 28, 32, 22, 29,
				  35, 41, 30, 25, 19, 65, 23, 31, 39, 17, 54,
				  42, 56, 29, 34, 13],
    "deuteronomy":		 [46, 37, 29, 49, 33, 25, 26, 20, 29,
				  22, 32, 31, 19, 29, 23, 22, 20, 22, 21, 20,
				  23, 29, 26, 22, 19, 19, 26, 69, 28, 20, 30,
				  52, 29, 12],
    "joshua":			 [18, 24, 17, 24, 15, 27, 26, 35, 27,
				  43, 23, 24, 33, 15, 63, 10, 18, 28, 51, 9,
				  45, 34, 16, 33],
    "judges":			 [36, 23, 31, 24, 31, 40, 25, 35, 57,
				  18, 40, 15, 25, 20, 20, 31, 13, 31, 30, 48,
				  25],
    "ruth":			 [22, 23, 18, 22],
    "1 kings":			 [28, 36, 21, 22, 12, 21, 17, 22, 27,
				  27, 15, 25, 23, 52, 35, 23, 58, 30, 24, 42,
				  16, 23, 28, 23, 43, 25, 12, 25, 11, 31, 13],
    "2 kings":			 [27, 32, 39, 12, 25, 23, 29, 18, 13,
				  19, 27, 31, 39, 33, 37, 23, 29, 32, 44, 26,
				  22, 51, 39, 25],
    "3 kings":			 [53, 46, 28, 20, 32, 38, 51, 66, 28,
				  29, 43, 33, 34, 31, 34, 34, 24, 46, 21, 43,
				  29, 54],
    "4 kings":			 [18, 25, 27, 44, 27, 33, 20, 29, 37,
				  36, 20, 22, 25, 29, 38, 20, 41, 37, 37, 21,
				  26, 20, 37, 20, 30],
    "1 chronicles":		 [54, 55, 24, 43, 41, 66, 40, 40, 44,
				  14, 47, 41, 14, 17, 29, 43, 27, 17, 19, 8,
				  30, 19, 32, 31, 31, 32, 34, 21, 30],
    "2 chronicles":		 [18, 17, 17, 22, 14, 42, 22, 18, 31,
				  19, 23, 16, 23, 14, 19, 14, 19, 34, 11, 37,
				  20, 12, 21, 27, 28, 23, 9, 27, 36, 27, 21,
				  33, 25, 33, 26, 23],
    "1 esdras":			 [11, 70, 13, 24, 17, 22, 28, 36, 15,
				  44],
    "2 esdras":			 [11, 20, 38, 17, 19, 19, 72, 18, 37,
				  40, 36, 47, 31],
    "tobit":			 [22, 14, 17, 21, 22, 18, 17, 21, 6,
				  14, 18, 22, 18, 15],
    "judith":			 [16, 28, 10, 15, 24, 21, 32, 36, 14,
				  23, 23, 20, 20, 19, 14, 25],
    "esther":			 [22, 23, 15, 17, 14, 14, 10, 17, 32,
				  3, 17, 8, 30, 16, 24, 10],
    "1 maccabees":		 [63, 70, 59, 61, 68, 63, 50, 32, 73,
				  89, 74, 53, 53, 49, 41, 24],
    "2 maccabees":		 [36, 32, 40, 50, 27, 31, 42, 36, 29,
				  38, 38, 46, 26, 46, 39],
    "job":			 [22, 13, 26, 21, 27, 30, 21, 22, 35,
				  22, 20, 25, 28, 22, 35, 22, 16, 21, 29, 29,
				  34, 30, 17, 25, 6, 14, 21, 28, 25, 31, 40,
				  22, 33, 37, 16, 33, 24, 41, 30, 32, 26, 17],
    "psalms":			 [6, 11, 9, 9, 13, 11, 18, 10, 21, 18, 7, 9,
				  6, 7, 5, 11, 15, 51, 15, 10, 14, 32, 6, 10,
				  22, 11, 14, 9, 11, 13, 25, 11, 22, 23, 28,
				  13, 40, 23, 14, 18, 14, 12, 5, 27, 18, 12,
				  10, 15, 21, 23, 21, 11, 7, 9, 24, 14, 12,
				  12, 18, 14, 9, 13, 12, 11, 14, 20, 8, 36,
				  37, 6, 24, 20, 28, 23, 11, 13, 21, 72, 13,
				  20, 17, 8, 19, 13, 14, 17, 7, 19, 53, 17,
				  16, 16, 5, 23, 11, 13, 12, 9, 9, 5,
				  8, 29, 22, 35, 45, 48, 43, 14, 31, 7, 10,
				  10, 9, 8, 18, 19, 2, 29, 176, 7, 8, 9, 4,
				  8, 5, 6, 5, 6, 8, 8, 3, 18, 3, 3, 21, 26,
				  9, 8, 24, 14, 10, 8, 12, 15, 21, 10, 20,
				  14, 9, 6],
    "proverbs":			 [33, 22, 35, 27, 23, 35, 27, 36, 18,
				  32, 31, 28, 25, 35, 33, 33, 28, 24, 29, 30,
				  31, 29, 35, 34, 28, 28, 27, 28, 27, 33, 31],
    "ecclesiastes":		 [18, 26, 22, 17, 19, 12, 29, 17, 18,
				  20, 10, 14],
    "canticle of canticles":		 [17, 17, 11, 16, 16, 12, 14, 14],
    "wisdom":	 [16, 24, 19, 20, 23, 25, 30, 21, 18,
				  21, 26, 27, 19, 31, 19, 29, 21, 25, 22],
    "ecclesiasticus":	 [29, 18, 30, 31, 17, 37, 36, 19, 18,
				  30, 34, 18, 25, 27, 20, 28, 27, 33, 26, 30,
				  28, 27, 27, 31, 25, 20, 30, 26, 28, 25, 31,
				  24, 33, 26, 24, 27, 30, 34, 35, 30, 24, 25,
				  35, 23, 26, 20, 25, 25, 16, 29, 30],
    "isaias":			 [31, 22, 26, 6, 30, 13, 25, 23, 20,
				  34, 16, 6, 22, 32, 9, 14, 14, 7, 25, 6, 17,
				  25, 18, 23, 12, 21, 13, 29, 24, 33, 9, 20,
				  24, 17, 10, 22, 38, 22, 8, 31, 29, 25, 28,
				  28, 25, 13, 15, 22, 26, 11, 23, 15, 12, 17,
				  13, 12, 21, 14, 21, 22, 11, 12, 19, 11, 25,
				  24],
    "jeremias":			 [19, 37, 25, 31, 31, 30, 34, 23, 25,
				  25, 23, 17, 27, 22, 21, 21, 27, 23, 15, 18,
				  14, 30, 40, 10, 38, 24, 22, 17, 32, 24, 40,
				  44, 26, 22, 19, 32, 21, 28, 18, 16, 18, 22,
				  13, 30, 5, 28, 7, 47, 39, 46, 64, 34],
    "lamentations":		 [22, 22, 66, 22, 22],
    "baruch":			 [22, 35, 38, 37, 9, 72],
    "ezechiel":			 [28, 10, 27, 17, 17, 14, 27, 18, 11,
				  22, 25, 28, 23, 23, 8, 63, 24, 32, 14, 44,
				  37, 31, 49, 27, 17, 21, 36, 26, 21, 26, 18,
				  32, 33, 31, 15, 38, 28, 23, 29, 49, 26, 20,
				  27, 31, 25, 24, 23, 35],
    "daniel":			 [21, 49, 100, 34, 30, 29, 28, 27, 27,
				  21, 45, 13, 64, 42],
    "osee":			 [9, 25, 5, 19, 15, 11, 16, 14, 17,
				  15, 11, 15, 15, 10],
    "joel":			 [20, 27, 5, 21],
    "amos":			 [15, 16, 15, 13, 27, 14, 17, 14, 15],
    "obadiah":			 [21],
    "jonah":			 [16, 11, 10, 11],
    "micheas":			 [16, 13, 12, 14, 14, 16, 20],
    "nahum":			 [14, 14, 19],
    "habacuc":			 [17, 20, 19],
    "sophonias":		 [18, 15, 20],
    "aggeus":			 [15, 23],
    "zecharias":		 [17, 17, 10, 14, 11, 15, 14, 23, 17,
				  12, 17, 14, 9, 21],
    "malachias":			 [14, 17, 24],
    
    "matthew":			 [25, 23, 17, 25, 48, 34, 29, 34, 38, 42, 30,
				  50, 58, 36, 39, 28, 27, 35, 30, 34, 46, 46,
				  39, 51, 46, 75, 66, 20], 
    "mark":			 [45, 28, 35, 41, 43, 56, 37, 38, 50, 52, 33,
				  44, 37, 72, 47, 20],
    "luke":			 [80, 52, 38, 44, 39, 49, 50, 56, 62, 42, 54,
				  59, 35, 35, 32, 31, 37, 43, 48, 47, 38, 71,
				  56, 53],
    "john":			 [51, 25, 36, 54, 47, 71, 53, 59, 41, 42, 57,
				  50, 38, 31, 27, 33, 26, 40, 42, 31, 25],
    "acts":			 [26, 47, 26, 37, 42, 15, 60, 40, 43, 48, 30,
				  25, 52, 28, 41, 40, 34, 28, 40, 38, 40, 30,
				  35, 27, 27, 32, 44, 31],
    "romans":			 [32, 29, 31, 25, 21, 23, 25, 39, 33, 21, 36,
				  21, 14, 23, 33, 27],
    "1 corinthians":			 [31, 16, 23, 21, 13, 20, 40, 13, 27, 33, 34,
				  31, 13, 40, 58, 24],
    "2 corinthians":			 [24, 17, 18, 18, 21, 18, 16, 24, 15, 18, 33,
				  21, 13],
    "galatians":			 [24, 21, 29, 31, 26, 18],
    "ephesians":			 [23, 22, 21, 32, 33, 24],
    "philippians":			 [30, 30, 21, 23],
    "colossians":			 [29, 23, 25, 18],
    "1 thessalonians":			 [10, 20, 13, 18, 28],
    "2 thessalonians":			 [12, 17, 18],
    "1 timothy":			 [20, 15, 16, 16, 25, 21],
    "2 timothy":			 [18, 26, 17, 22],
    "titus":			 [16, 15, 15],
    "philomena":			 [25],
    "hebrews":			 [14, 18, 19, 16, 14, 20, 28, 13, 28, 39, 40,
				  29, 25],
    "james":			 [27, 26, 18, 17, 20],
    "1 peter":			 [25, 25, 22, 19, 14],
    "2 peter":			 [21, 22, 18],
    "1 john":			 [10, 29, 24, 21, 21],
    "2 john":			 [13],
    "3 john":			 [15],
    "jude":			 [25],
    "apocalypse":			 [20, 29, 22, 11, 14, 17, 17, 13, 21, 11, 19,
				  17, 18, 20, 8, 21, 18, 24, 21, 15, 27, 21]}


var authors = {
    "Clement of Rome": "Clement of Rome",
    "Mathetes": "Mathetes",
    "Polycarp": "Polycarp",
    "Ignatius": "Ignatius",
    "Barnabas": "Barnabas",
    "Papias": "Papias",
    "Justin Martyr": "Justin Martyr",
    "Irenaeus.": "Irenaeus",
    "Hippolytus.": "Hippolytus",
    "Tertullian": "Tertullian",
    "The Pastor of Hermas": "The Pastor of Hermas",
    "Tatian": "Tatian",
    "Theophilus of Antioch": "Theophilus of Antioch",
    "Writings of Athenagoras": "Writings of Athenagoras",
    "Clement of Alexandria": "Clement of Alexandria",
    "Lactantius": "Lactantius",
    "Venantius": "Venantius",
    "Asterius Urbanus": "Asterius Urbanus",
    "Victorinus": "Victorinus",
    "Dionysius": "Dionysius",
    "Clement": "Clement",
    "Nicene Council": "Nicene Council",
    "Minucius Felix": "Minucius Felix",
    "Origen": "Origen",
    "The Epistles of Clement": "Clement",
    "Cyprian": "Cyprian",
    "Caius": "Caius",
    "Novatian": "Novatian",
    "Appendix": "Appendix",
    "St. Aurelius Augustin": "Augustine",
    "The Twelve Patriarchs": "The Twelve Patriarchs",
    "Theodotus": "Theodotus",
    "Pseudo-Clementine Literature": "Pseudo-Clementine",
    "Apocrypha of the New Testament": "Apocrypha of the New Testament",
    "The Decretals": "The Decretals",
    "Memoirs of Edessa": "Memoirs of Edessa",
    "Augustine-Anti-Manichaean Writings": "Augustine",
    "Augustine-Anti-Donatist Writings": "Augustine",
    "Julius Africanus": "Julius Africanus",
    "Julius Africanus ": "Julius Africanus",
    "Anatolius and Minor Writers.": "Anatolius",
    "Alexander of Cappadocia.": "Alexander of Cappadocia",
    "The Diatessaron of Tatian": "Tatian",
    "Theognostus of Alexandria.": "Theognostus of Alexandria",
    "Pierius of Alexandria.1": "Pierius of Alexandria",
    "Pierius of Alexandria.": "Pierius of Alexandria",
    "Theonas of Alexandria.": "Theonas of Alexandria",
    "Phileas.": "Phileas",
    "Pamphilus.": "Pamphilus",
    "Malchion.": "Malchion",
    "Malchion.": "Malchion",
    "Archelaus.": "Archelaus",
    "Alexander": "Alexander",
    "Peter, Bishop of Alexandria": "Peter, Bishop of Alexandria",
    "Methodius": "Methodius",
    "Arnobius": "Arnobius",
    "St. John Chrysostom": "St. John Chrysostom",
    "Socrates Scholasticus.": "Socrates Scholasticus",
    "Hermias Sozomen": "Hermias Sozomen",
    "Eusebius Pamphilus": "Eusebius Pamphilus",
    "Theodoret": "Theodoret",
    "Jerome and Gennadius": "Jerome and Gennadius",
    "Rufinus": "Rufinus",
    "Gregory of Nyssa": "Gregory of Nyssa",
    "Athanasius, Bishop of Alexandria": "Athanasius",
    "Hilary of Poitiers": "Hilary of Poitiers",
    "John of Damascus.": "John of Damascus",
    "St. Ambrose": "St. Ambrose",
    "Sulpitius Severus": "Sulpitius Severus",
    "Vincent of Lerins": "Vincent of Lerins",
    "John Cassian": "John Cassian",
    "Ephraim the Syrian": "Ephraim the Syrian",
    "Ephraim Syrus": "Ephraim Syrus",
    "Aphrahat": "Aphrahat",
    "Gregory Thaumaturgus": "Gregory Thaumaturgus",
    "St. Basil": "St. Basil",
    "Gregory the Great": "Gregory the Great",
    "Cyril": "Cyril",
    "Gregory Nazianzen.": "Gregory Nazianzen",
    "The First Ecumenical Council; The First Council of Nice": "The First Ecumenical Council; The First Council of Nice",
    "The Canons of the Councils of Ancyra, Gangra Neocaesarea, Antioch and Laodicea": "The Canons of the Councils of Ancyra, Gangra Neocaesarea, Antioch and Laodicea",
    "The Second Ecumenical Council. The First Council of Constantinople.": "The Second Ecumenical Council. The First Council of Constantinople",
    "The Third Ecumenical Council.; The Council of Ephesus.": "The Third Ecumenical Council.; The Council of Ephesus",
    "The Fourth Ecumenical Council.; The Council of Chalcedon.": "The Fourth Ecumenical Council.; The Council of Chalcedon",
    "The Fifth Ecumenical Council. The Second Council of Constantinople.": "The Fifth Ecumenical Council. The Second Council of Constantinople",
    "The Sixth Ecumenical Council.; The Third Council of Constantinople.": "The Sixth Ecumenical Council.; The Third Council of Constantinople",
    "The Canons of the Council in Trullo; Often Called the Quinisext Council.": "The Canons of the Council in Trullo",
    "The Canons of the Synods of Sardica, Carthage, Constantinople, and Carthage": "The Canons of the Synods of Sardica, Carthage, Constantinople, and Carthage",
    "The Seventh Ecumenical Council. The Second Council of Nice.": "The Seventh Ecumenical Council. The Second Council of Nice."}

function to_code(end_part, title) {
    return (end_part + "_" + title).toLowerCase().replace(/[^a-z0-9]+/g, '_') }


var book_keys_tbl = {
    "genesis":			 "genesis",
    "exodus":			 "exodus",
    "leviticus":		 "leviticus",
    "numbers":			 "numbers",
    "deuteronomy":		 "deuteronomy",
    "joshua":			 "joshua",
    "judges":			 "judges",
    "ruth":			 "ruth",
    "1 samuel":			 "1 kings",
    "2 samuel":			 "2 kings",
    "1 kings":			 "3 kings",
    "2 kings":			 "4 kings",
    "1 chronicles":		 "1 chronicles",
    "2 chronicles":		 "2 chronicles",
    "ezra":			 "1 esdras",
    "nehemiah":			 "2 esdras",
    "esther":			 "esther",
    "job":			 "job",
    "psalms":			 "psalms",
    "proverbs":			 "proverbs",
    "ecclesiastes":		 "ecclesiastes",
    "song of solomon":		 "canticle of canticles",
    "isaiah":			 "isaias",
    "jeremiah":			 "jeremias",
    "lamentations":		 "lamentations",
    "ezekiel":			 "ezechiel",
    "daniel":			 "daniel",
    "hosea":			 "osee",
    "joel":			 "joel",
    "amos":			 "amos",
    "obadiah":			 "obadiah",
    "jonah":			 "jonah",
    "micah":			 "micheas",
    "nahum":			 "nahum",
    "habakkuk":			 "habacuc",
    "zephaniah":		 "sophonias",
    "haggai":			 "aggeus",
    "zechariah":		 "zecharias",
    "malachi":			 "malachias",
    "matthew":			 "matthew",
    "mark":			 "mark",
    "luke":			 "luke",
    "john":			 "john",
    "the acts":			 "acts",
    "romans":			 "romans",
    "1 corinthians":		 "1 corinthians",
    "2 corinthians":		 "2 corinthians",
    "galatians":		 "galatians",
    "ephesians":		 "ephesians",
    "philippians":		 "philippians",
    "colossians":		 "colossians",
    "1 thessalonians":		 "1 thessalonians",
    "2 thessalonians":		 "2 thessalonians",
    "1 timothy":		 "1 timothy",
    "2 timothy":		 "2 timothy",
    "titus":			 "titus",
    "philemon":			 "philemon",
    "hebrews":			 "hebrews",
    "james":			 "james",
    "1 peter":			 "1 peter",
    "2 peter":			 "2 peter",
    "1 john":			 "1 john",
    "2 john":			 "2 john",
    "3 john":			 "3 john",
    "jude":			 "jude",
    "revelation":		 "apocalypse",
    "esther (greek)":		 "esther (greek)",
    "judith":			 "judith",
    "tobit":			 "tobit",
    "1 maccabees":		 "1 maccabees",
    "2 maccabees":		 "2 maccabees",
    "3 maccabees":		 "3 maccabees",
    "4 maccabees":		 "4 maccabees",
    "wisdom":			 "wisdom",
    "sirach":			 "sirach",
    "baruch":			 "baruch",
    "letter of jeremiah":	 "letter of jeremiah",
    "susanna":			 "susanna",
    "bel and the dragon":	 "bel and the dragon",
    "prayer of manasseh":	 "prayer of manasseh",
    "1 esdras":			 "1 esdras",
    "2 esdras":			 "2 esdras",
    "psalm 151":	         "psalm 151",
    "epistle to laodiceans":	 "epistle to laodiceans",
    "psalterium iuxta hebraeos": "psalterium iuxta hebraeos"}

var books_tbl   = [
    ["Genesis","1 Mz","1 Mojz","Gen","Gn","Ge","Post","Has","Geneza","1 Mojzes","Genesis","1 Mose"],
    ["Exodus","2 Mz","2 Mojz","Exo","Ex","Exod","Izl","Ir","Eksodus","2 Mojzes","Exodus","2 Mose"],
    ["Leviticus","3 Mz","3 Mojz","Lev","L�v","Lv","Lb","Leu","Levitik","3 Mojzes","Leviticus","3 Mose"],
    ["Numbers","4 Mz","4 Mojz","Num","Nm","Nu","Nb","Nomb","Br","Zen","Numeri","4 Mojzes","Numbers","4 Mose"],
    ["Deuteronomy","5 Mz","5 Mojz","Deu","Dt","Deut","Pnz","Devteronomij","5 Mojzes","Deuteronomium","Deuteronomy","5 Mose","Deuteronomio"],
    ["Joshua","Joz","Jos","Josh","Ios","Jozue","Joshua","Jozua","Josua"],
    ["Judges","Sod","Sodn","Jdg","Judg","Jg","Jug","Jdc","Jue","Jt","Idc","Re","Ri","Richt","Epa","Sodniki","Judges","Rechters","Richteren","Richter","Jueces"],
    ["Ruth","Rut","Ru","Rth","Rt","Ruth","Ruta"],
    ["1 Samuel","1 Sam","1 Sa","1 S","1 Sm","1 Rg","1 Regn","1 Samuel"],
    ["2 Samuel","2 Sam","2 Sa","2 S","2 Sm","2 Rg","2 Regn","2 Samuel"],
    ["1 Kings","1 Kr","1 Kra","1 Kralj","1 Ki","1 Kgs","1 R","1 Re","3 Rg","3 Regn","1 Kon","1 Erg","1 Rois","1 Kings","1 Kralji","1 Koningen","1 Reyes"],
    ["2 Kings","2 Kr","2 Kra","2 Kralj","2 Ki","2 Kgs","2 R","2 Re","4 Rg","4 Regn","2 Kon","2 Erg","2 Rois","2 Kings","2 Kralji","2 Koningen","2 Reyes"],
    ["1 Chronicles","1 Krn","1 Kron","1 Let","1 Ljet","1 Ch","1 Cr","1 Cro","1 Kro","1 Chron","1 Chr","1 Letopisi","1 Chronicles","1 Kronieken","1 Chronik", "3 Kgs"],
    ["2 Chronicles","2 Krn","2 Kron","2 Let","2 Ljet","2 Ch","2 Cr","2 Cro","2 Kro","2 Chron","2 Chr","2 Letopisi","2 Chronicles","2 Kronieken","2 Chronik", "4 kgs"],
    ["Ezra","Ezr","Ezdr","Ezra","Esra","Esr","Esd","1 Ezr","1 Esr","Ezdra","Esdras"],
    ["Nehemiah","Neh","Ne","2 Ezr","2 Esr","Nehemija","Nehemiah","Nehemia"],
    ["Esther","Est","Ester","Esth","Esther","Estera"],
    ["Job","Job","Hi","Jb","Iob","Hiob","Ijob"],
    ["Psalms","Ps","Psa","PsG","Sal","Sl","Psalm","Psalmi","Psalms","Psalmen","Salmos"],
    ["Proverbs","Prg","Preg","Pro","Prov","Pr","Prv","Prou","Spr","Izr","EsZ","Pregovori","Proverbs","Spreuken"],
    ["Ecclesiastes","Prd","Prid","Prop","Ec","Ecc","Eccl","Ecl","Qo","Qoh","Coh","Koh","Pred","Pridigar","Ecclesiastes","Prediker","Prediger","Qoheleth"],
    ["Song of Solomon","Vp","Sng","Song","Sgs","SS","Cant","Cnt","Ct","Kt","Hoogl","Hl","Hld","Pj","VisokaPesem","VisokaP","Canticles","Hooglied","Hoheslied","Cantares"],
    ["Isaiah","Iz","Izai","Izaija","Isa","Is","Jes","Js","Es","�s","Isaiah","Jesaja"],
    ["Jeremiah","Jerr","Jr","Ier","Jeremija","Jeremiah","Jeremia"],
    ["Lamentations","Lam","La","Lm","Thr","Klaagl","Kl","Klgl","Klgld","Nk","�alostinke","Lamentations","Klaagliederen","Klagelieder","Lamentaciones"],
    ["Ezekiel","Ezk","Ez","Eze","Ezec","Ezek","Hes","Ezekiel","Ezekijel","Ezechiel","Hesekiel","Ezequiel"],
    ["Daniel","Dan","Da","Dn","Daniel","Danijel"],
    ["Hosea","Oz","Ozea","Hos","Ho","Os","Ozej","Hosea","Osee","Oseas"],
    ["Joel","Jl","Jol","Joel","Ioel"],
    ["Amos","Am","Amo","Amos"],
    ["Obadiah","Abd","Ab","Oba","Obd","Obad","Ob","Abdija","Obadija","Obadiah","Obadja"],
    ["Jonah","Jon","Jnh","Ion","Jona","Jonah"],
    ["Micah","Mih","Mic","Mi","Mch","Mich","Miq","Mihej","Miha","Micah","Micha","Miqueas"],
    ["Nahum","Nah","Nam","Na","Nahum"],
    ["Habakkuk","Hab","Ha","Habakuk","Habakkuk","Habacuc"],
    ["Zephaniah","Sof","Zep","Zeph","Zef","Sef","So","Soph","Sofonija","Zefanija","Zephaniah","Sefanja","Zephanja","Zefanja"],
    ["Haggai","Ag","Hag","Hagg","Hgg","Hg","Agg","Agej","Hagaj","Haggai","Hageo"],
    ["Zechariah","Zah","Zec","Zech","Zch","Za","Zac","Zach","Sach","Zaharija","Zechariah","Zacharia","Sacharja"],
    ["Malachi","Mal","Ml","Malahija","Malachi","Maleachi"],
    ["Matthew","Mt","Mat","Matt","Matej","Matthew","Matteus","Mateo","Matth"],
    ["Mark","Mr","Mar","Mrk","Mk","Mc","Marko","Mark","Marcus","Markus","Marc","Marcos"],
    ["Luke","Lk","Luk","Lc","Luc","Lu","Luka","Luke","Lucas","Lukas","Lucas"],
    ["John","Jn","Jan","Jhn","Joh","Jo","Janez","John","Johannes","Jean","Juan"],
    ["The Acts","Apd","Dej","DejAp","Act","Ac","Hand","Hnd","Apg","Dj","Hch","Eg","Acts","Dela","Dejanja","Handelingen","Apostelgeschichte","Hechos"],
    ["Romans","Rim","Rimlj","Rom","Ro","Rm","R","Erm","Rimljanom","Romans","Romeinen","Romanos"],
    ["1 Corinthians","1 Kor","1 Cor","1 Co","1 Ko","1 K","1 Korin�anom","1 Corinthians","1 Korintiers","1 Korinthe","1 Korinther","1 Corintios"],
    ["2 Corinthians","2 Kor","2 Cor","2 Co","2 Ko","2 K","2 Corinthians","2 Korintiers","2 Korinthe","2 Korinther","2 Corintios"],
    ["Galatians","Gal","Ga","Gl","G","Gala�anom","Galatians","Galaten","Galater"],
    ["Ephesians","Ef","Efez","Eph","Ep","E","Ephesians","Efeziers","Efeze","Epheser","Efesios"],
    ["Philippians","Flp","Filip","Filipp","Fil","Fl","Php","Ph","Phil","Phili","Filipljanom","Philippians","Filippenzen","Philipper","Filipenses"],
    ["Colossians","Kol","Col","Colossians","Kolossenzen","Kolosser","Colosenses"],
    ["1 Thessalonians","1 Tes","1 Sol","1 Th","1 Ts","1 Te","1 Tess","1 Thes","1 Thess","1 Thessalonians","1 Tessalonicenzen","1 Thessalonicher","1 Tesalonicenses"],
    ["2 Thessalonians","2 Tes","2 Sol","2 Th","2 Ts","2 Te","2 Tess","2 Thes","2 Thess","2 Thessalonians","2 Tessalonicenzen","2 Thessalonicher","2 Tesalonicenses"],
    ["1 Timothy","1 Tim","1 Ti","1 Tm","1 T","1 Timoteju","1 Timothy","1 Timoteus","1 Timotheus","1 Timoteo"],
    ["2 Timothy","2 Tim","2 Ti","2 Tm","2 T","2 Timoteju","2 Timothy","2 Timoteus","2 Timoteus","2 Timotheus","2 Timoteo"],
    ["Titus","Tit","Tt","Titus","Titu","Tite","Tito"],
    ["Philemon","Flm","Filem","Film","Phm","Phlm","Phile","Philem","Filemonu","Philemon","Filemon"],
    ["Hebrews","Heb","Hebr","H�br","Hbr","Hb","He","H","Hebrejcem","Hebrews","Hebreeers","Hebreeen","Hebreos"],
    ["James","Jak","Jas","Jam","Jm","Ja","Jc","Jac","Jacq","Iac","Stg","St","Jakob","James","Jakobus","Santiago"],
    ["1 Peter","1 Pt","1 Pet","1 Petr","1 Pe","1 Pi","1 P","1 Peter","1 Petrus","1 Pedro"],
    ["2 Peter","2 Pt","2 Pet","2 Petr","2 Pe","2 Pi","2 P","2 Peter","2 Petrus","2 Pedro"],
    ["1 John","1 Jn","1 Jan","1 Joh","1 Jo","1 J","1 Io","1 Iv","1 John","1 Janez","1 Johannes","1 Jean","1 Juan"],
    ["2 John","2 Jn","2 Jan","2 Joh","2 Jo","2 J","2 Io","2 Iv","2 John","2 Janez","2 Johannes","2 Jean","2 Juan"],
    ["3 John","3 Jn","3 Jan","3 Joh","3 Jo","3 J","3 Io","3 Iv","3 John","3 Janez","3 Johannes","3 Jean","3 Juan"],
    ["Jude","Jud","Juda","Jude","Jd","Ju","Iud","Judas"],
    ["Revelation","Raz","Rev","Ap","Apc","Apoc","Apok","Apk","Op","Openb","Offb","Otk","Razodetje","Apokalipsa","Revelation","Openbaring","Apokalyps","Offenbarung","Apocalipsis"],
    ["Esther (Greek)","EstG","EsG","EstGr","EsthGr","EstGrec","EstD","EstDC","GkEst","AddEsth","StEst","Estera(gr)","Esther(gr)","Esther(Greek)","Ester(griechisch)","Ester(Griego)","Ester_(Grieks)"],
    ["Judith","Jdt","Jdth","Idt","Judita","Judith","Judit"],
    ["Tobit","Tob","Tb","Tobit","Tobija"],
    ["1 Maccabees","1 Mkb","1 Mak","1 Makk","1 Mc","1 Mac","1 Macc","1 Mcc","1 Ma","1 M","1 Makabejci","1 Maccabees","1 Makkabeeen","1 Makkabeeers","1 Macabeos"],
    ["2 Maccabees","2 Mkb","2 Mak","2 Makk","2 Mc","2 Mac","2 Macc","2 Mcc","2 Ma","2 M","2 Makabejci","2 Maccabees","2 Makkabeeen","2 Makkabeeers","2 Macabeos"],
    ["3 Maccabees","3 Mkb","3 Mak","3 Makk","3 Mc","3 Mac","3 Macc","3 Mcc","3 Ma","3 M","3 Makabejci","3 Maccabees","3 Makkabeeen","3 Makkabeeers","3 Macabeos"],
    ["4 Maccabees","4 Mkb","4 Mak","4 Makk","4 Mc","4 Mac","4 Macc","4 Mcc","4 Ma","4 M","4 Makabejci","4 Maccabees","4 Makkabeeen","4 Makkabeeers","4 Macabeos"],
    ["Wisdom","Mdr","Modr","Wis","Wisd","Weish","Wijsh","W","Sg","Sag","Sap","Sb","Sab","Sv","Mudr","Jkd","Modrost","Wisdom","Wijsheid","Weisheit"],
    ["Sirach","Sir","Si","Sirah","Sirach","Eclo","Ecclesiasticus","Ecclesiastique"],
    ["Baruch","Bar","Ba","Baruh","Baruch","Baruc"],
    ["Letter of Jeremiah","JerP","LJe","LJer","LtJr","LetJer","LettreJer","EpJer","EpJr","EpistJer","BrJer","CtJ","JrGt","JeremijevoP","JeremijevoPismo","BriefJeremias","BrfJer","Brief_van_Jeremia"],
    ["Prayer of Azariah / Song of the Three Young Men","DanD","AddDan","DanAdd","StDan","DanZ","DnGrec","DanGrec","DnDC","DnGr","PrAzar","Az","S3Y","SofThr","SongThr","Daniel(dodatki)","Daniel(Additions)","ToevDan","DanGr","Toevoegingen_aan_Dan"],
    ["Susanna","Suz","Sus","Suzana","Susanna","Susana"],
    ["Bel and the Dragon","Bel","BelDr","Zmaj","Dragon"],
    ["Prayer of Manasseh","Man","PrMan","OrMan","GebMan","Manase","Manasse","Manasses","PrManasses"],
    ["1 Esdras","1 Esd","3 Esr","3 Ezr","3 Ezra","1 Esdras","1 Ezdra","3 Esdras"],
    ["2 Esdras","2 Esd","4 Esr","4 Ezr","4 Ezra","2 Esdras","2 Ezdra","4 Esdras"],
    ["Psalm 151","Ps151","Sal151","Sl151","Psalm151","Salmo151","PsCLI"],
    ["Epistle to Laodiceans","Lao","Laod","Laodikejcem","Laodiceans"],
    ["Psalterium iuxta Hebraeos","PsH","PsHeb","SIH","PsalmH"]]
    .map((list) => list.map((item) => item.toLowerCase()))

function member(a, i) {
    return a.indexOf(i) > -1 }

function parse_roman(str1) {
    if(str1 == null)         return -1
    if (str1.match(/^\d+$/)) return Number.parseInt(str1)
    
    var num = char_to_int(str1.charAt(0))
    var pre, curr

    for (var i = 1; i < str1.length; i++){
	curr     = char_to_int(str1.charAt(i))
	pre      = char_to_int(str1.charAt(i-1))
	if(curr <= pre)
	    num   += curr
	else 
	    num    = num - (pre * 2) + curr }
	
    return num }

function char_to_int(c){
    switch (c.toUpperCase()) {
    case 'I': return 1
    case 'V': return 5
    case 'X': return 10
    case 'L': return 50
    case 'C': return 100
    case 'D': return 500
    case 'M': return 1000
    default: return 0 }}

function parse_refs(footnote) {
    var all_books = books_tbl.reduce((a, b) => a.concat(b), []).join('|')
    var regex     = new RegExp(
	'\\b(' + all_books + ')\\b\\.? +([0-9ivxlcdmIVXLCDM]+[.,] +)?(\\d+(-\\d+)?(, \\d+)?)\\b[,.]?', 'ig')
    var verses    = []
    var matches   = footnote.match(regex) || []

    matches.map((match) => {
	var match     = regex.exec(footnote)
	var chapter   = match[11] ? parse_roman(match[11].replace(/[^0-9ivxlcdm]/gi, '')) : 1
	var verse     = Number.parseInt(match[12].match(/\d+/))
	var book      = get_book_name(match[1])

	verses.push({book, chapter, verses: [verse], index: match.index}) })

    return verses }

function get_book_name(short_name) {
    var book = short_name
    for (var i in books_tbl) 
	if (member(books_tbl[i], book.toLowerCase()))
	    book = books_tbl[i][0]
    return book }

function douay_book_name(short_name) {
    return book_keys_tbl[get_book_name(short_name)] }

function parse_uccsb_refs(note) {
    note          = note.toLowerCase().replace(/ /g, ' ').replace(/ +/g, ' ')
    var all_books = books_tbl.reduce((a, b) => a.concat(b), []).join('|')
    var regex     = new RegExp(
	'(.*?) (' + all_books + ') (((\\d+:)?(\\d+(-\\d+)?[a-d:]*,? ?))+)')
    var match     = regex.exec(note.toLowerCase())

    try {
	var label     = match[1]
	var book      = douay_book_name(match[2])
	var parts     = note
	    .slice((match[1] + ' ' + match[2] + ' ').length)
	    .trim()
	    .split(', ') }
    catch {
	return {label: false, book: false, verses: [], note}}	 

    var chapter   = false
    var verses    = []
    parts.map((part) => {
	var range = part.split(/[-–]/g)

	var items = range.map((part) => {
	    if (part.match(':')) {
		var split   = part.split(':')
		chapter     = split[0]
		part        = split[1] }

	    part        = part.replace(/[^-0-9]+/g, '')
	    return {chapter: Number.parseInt(chapter), part: Number.parseInt(part)}})
	
	var v1      = items[0].part
	var v2      = items.length > 1 ? items[1].part : v1
	var c1      = items[0].chapter
	var c2      = items.length > 1 ? items[1].chapter : c1

	for (var c = c1; c <= c2; c++) {
	    if (c == c2) v_end = v2
	    else         v_end = Math.min(bible[book][c - 1], 150)
	    if (c != c1) v1 = 0

	    for (var i = v1; i <= v_end; i++) {
		verses.push({chapter: c, verse: i}) }} })

    return {label, book, verses} }




module.exports = {to_code, authors, book_keys_tbl, parse_refs, parse_uccsb_refs, to_code, parse_roman}
